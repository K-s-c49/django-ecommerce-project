{% extends "app/base.html" %}
{% load static %}
{% block title %}Product-details{% endblock title %}

{% block main-content %}
<div class="container py-5">
  <div class="row g-5 align-items-center">

    <!-- Product Image -->
    <div class="col-md-6 text-center">
      <div class="p-3 border rounded shadow-sm bg-white d-inline-block">
        <img src="{{ product.product_image.url }}" 
             alt="{{ product.title }}" 
             class="img-fluid rounded" style="max-height: 380px;">
      </div>
    </div>

    <!-- Product Details -->
    <div class="col-md-6">
      <!-- Title -->
      <h1 class="h3 fw-bold mb-2">{{ product.title }}</h1>

      <!-- Price -->
      <div class="mb-3">
        <span class="fs-4 fw-semibold text-success">
          <i class="bi bi-currency-rupee"></i>{{ product.discounted_price }}/-
        </span>
        <small class="text-muted ms-2">
          <del><i class="bi bi-currency-rupee"></i>{{ product.selling_price }}</del>
        </small>
        <span class="badge bg-success ms-2">Best Seller</span>
      </div>

      <!-- Features -->
      <h4 class="h5 fw-semibold mb-3">Product Features</h4>
      <ul class="list-unstyled mb-4">
        <li class="mb-2">
          <i class="bi bi-check-circle-fill text-success me-2"></i>
          {{ product.description }}
        </li>
      </ul>

      <!-- Action Buttons -->
      <div class="d-flex flex-wrap gap-2 mt-3">
        
        <!-- Add to Cart -->
        <form action="/add-to-cart" method="get" class="flex-fill">
          <input type="hidden" name="prod_id" value="{{ product.id }}">
          <button type="submit" class="btn btn-primary w-100 shadow-sm">
            <i class="bi bi-cart-plus me-2"></i> Add to Cart
          </button>
        </form>

        <!-- Buy Now -->
        <a href="{% url 'showcart' %}" 
           class="btn btn-outline-dark flex-fill w-100 shadow-sm">
          <i class="bi bi-lightning-charge me-2"></i> Buy Now
        </a>

        <!-- Wishlist -->
        {% if wishlist %}
          <button type="button" pid="{{ product.id }}" 
                  class="minus-wishlist btn btn-danger shadow-sm">
            <i class="bi bi-heart-fill"></i>
          </button>
        {% else %}
          <button type="button" pid="{{ product.id }}" 
                  class="plus-wishlist btn btn-outline-danger shadow-sm">
            <i class="bi bi-heart"></i>
          </button>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Extra CSS -->
<style>
  .badge {
    font-size: 0.8rem;
  }
  .list-unstyled li {
    font-size: 0.95rem;
  }
</style>

{% endblock main-content %}

